# 微信城市群聊会员系统

这是一个基于PHP开发的支付网站，集成了第三方支付平台API，用于管理微信城市群聊会员的付费加入功能。

## 系统功能

- 支持多城市选择
- 提供多种会员套餐
- 集成支付宝和微信支付
- 支付结果异步通知处理
- 订单管理和日志记录
- 响应式设计，支持移动设备

## 目录结构

```
pay-website/
├── lib/                   # 支付相关库文件
│   ├── epay.config.php    # 支付配置文件
│   ├── EpayCore.class.php # 支付核心类
│   └── epayapi.php        # 支付API接口
├── css/                   # 样式文件
│   └── style.css          # 主要样式表
├── js/                    # JavaScript文件
├── images/                # 图片资源
├── orders/                # 订单数据存储
├── logs/                  # 日志文件
├── index.php              # 网站首页
├── pay.php                # 支付页面
├── notify_url.php         # 异步通知处理
├── return_url.php         # 同步返回处理
└── README.md              # 使用说明
```

## 部署说明

### 1. 环境要求

- PHP 5.6+ 环境
- 支持curl扩展
- 支持md5函数
- Web服务器（Apache/Nginx）

### 2. 配置步骤

1. 修改支付配置文件 `lib/epay.config.php`：
   - 确认 `partner`（商户ID）和 `key`（密钥）正确
   - 修改 `notify_url` 和 `return_url` 为您的实际域名

2. 设置文件权限：
   - orders/ 目录需要可写权限
   - logs/ 目录需要可写权限

3. 部署到您的Web服务器

### 3. 注意事项

- 实际部署时，请将配置文件中的 `http://你的域名` 替换为您的真实域名
- 确保支付回调地址（notify_url和return_url）可以从外网访问
- 建议在生产环境中使用HTTPS协议
- 订单数据在演示环境中存储为文件，实际应用中建议使用数据库

## 使用说明

1. 用户访问网站首页，选择城市和会员套餐
2. 点击「立即开通」按钮进入支付页面
3. 选择支付方式（支付宝或微信支付）
4. 完成支付后，系统会自动跳转回网站并显示支付结果
5. 用户根据提示联系客服获取微信群聊邀请

## 常见问题

1. **支付成功但订单状态未更新**
   - 检查服务器是否能接收外网请求
   - 查看logs目录下的日志文件排查问题

2. **签名验证失败**
   - 确认商户ID和密钥配置正确
   - 检查字符编码是否统一（建议使用UTF-8）

3. **支付页面无法加载**
   - 检查PHP环境是否正常
   - 确认文件权限设置正确

## 技术支持

如有任何问题，请联系：
- 技术支持邮箱：support@example.com
- 客服微信：请在支付成功页面查看

## 版权信息

© 2024 微信城市群聊会员系统. 保留所有权利。